import{_ as f,u as h}from"./index.b0ad68c7.js";import{_ as B}from"./avatar.18fe9697.js";import{_ as N,l as y}from"./lodash.6b5533db.js";import"./vendor.84a7fb30.js";const $=Vue.defineComponent({props:{menu:null},setup(r){const l=r,{menu:u}=Vue.toRefs(l);return(s,o)=>{const a=Vue.resolveComponent("MenuTree",!0),c=Vue.resolveComponent("el-sub-menu"),n=Vue.resolveComponent("el-menu-item");return Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u),e=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[e.children?(Vue.openBlock(),Vue.createBlock(c,{index:e.path,key:e.id},{title:Vue.withCtx(()=>[Vue.createElementVNode("i",{class:Vue.normalizeClass(e.meta.icon)},null,2),Vue.createElementVNode("span",null,Vue.toDisplayString(e.meta.title),1)]),default:Vue.withCtx(()=>[Vue.createVNode(a,{menu:e.children},null,8,["menu"])]),_:2},1032,["index"])):(Vue.openBlock(),Vue.createBlock(n,{index:e.path,key:e.id},{title:Vue.withCtx(()=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.meta.title),1)]),default:Vue.withCtx(()=>[Vue.createElementVNode("i",{class:Vue.normalizeClass(e.meta.icon)},null,2)]),_:2},1032,["index"]))],64))),256)}}});const T={class:"app-slider"},D={class:"app-slider__menu"},S=Vue.defineComponent({setup(r){const{state:l,commit:u,getters:s}=h(),o={collapse:null},a=Vue.computed(()=>l.menu.menu),c=Vue.computed(()=>s["user/browser"]),n=Vue.computed(()=>s["user/collapse"]);function e(){window.open("http://food.f1dao.cn")}function d(){window.addEventListener("resize",()=>{u("user/setBrowser"),c.value.isMini?o.collapse==null&&(o.collapse=n.value,u("user/updCollapse",!0)):o.collapse!=null&&(u("user/updCollapse",o.collapse),o.collapse=null)})}return Vue.onMounted(()=>{d()}),(_,V)=>{const t=Vue.resolveComponent("v-lottie"),i=Vue.resolveComponent("el-menu"),p=Vue.resolveComponent("el-scrollbar");return Vue.openBlock(),Vue.createElementBlock("div",T,[Vue.createElementVNode("div",{class:"app-slider__logo",onClick:e},[Vue.createVNode(t,{src:"/static/lottie/food.json",background:"#304156"})]),Vue.createElementVNode("div",D,[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[Vue.createVNode(i,{"default-active":_.$route.path,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409eff",router:"",collapse:Vue.unref(n),"collapse-transition":!1,"unique-opened":""},{default:Vue.withCtx(()=>[Vue.createVNode($,{menu:Vue.unref(a)},null,8,["menu"])]),_:1},8,["default-active","collapse"])]),_:1})])])}}});var I=f(S,[["__scopeId","data-v-42f821c0"]]);const R=r=>(Vue.pushScopeId("data-v-412c4791"),r=r(),Vue.popScopeId(),r),F={class:"app-tags"},z={class:"flex items-center"},A=Vue.createTextVNode("\u5173\u95ED\u5176\u4ED6"),L=Vue.createTextVNode("\u5173\u95ED\u5230\u53F3\u4FA7"),j=Vue.createTextVNode("\u5173\u95ED\u5230\u5DE6\u4FA7"),M=Vue.createTextVNode("\u5173\u95ED\u5168\u90E8"),P=Vue.createTextVNode(" \u6807\u7B7E\u9009\u9879 "),O=R(()=>Vue.createElementVNode("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),q=Vue.createTextVNode("\u5173\u95ED\u5176\u4ED6"),K=Vue.createTextVNode("\u5173\u95ED\u6240\u6709"),U=Vue.defineComponent({setup(r){const l=VueRouter.useRoute(),u=VueRouter.useRouter(),{state:s,commit:o}=h(),a=s.menu.tagsList;function c(t){return t==l.fullPath}function n(t){a.some(p=>p.path==t.fullPath)||o("menu/setTagsItem",{name:t.name,title:t.meta.title,path:t.fullPath})}n(l),VueRouter.onBeforeRouteUpdate(t=>{n(t)});function e(t){const i=a[t+1]||a[t-1];o("menu/delTagsItem",t),i?u.push(i.path):u.push("/")}function d(t){switch(t){case"other":V();break;case"all":_();break}}function _(){o("menu/clearTags"),u.push("/")}function V(){const t=a.find(i=>i.path==l.fullPath);t&&o("menu/clearTagsOther",t)}return(t,i)=>{const p=Vue.resolveComponent("router-link"),g=Vue.resolveComponent("el-tag"),m=Vue.resolveComponent("el-dropdown-item"),C=Vue.resolveComponent("el-dropdown-menu"),x=Vue.resolveComponent("el-dropdown"),E=Vue.resolveComponent("el-scrollbar"),b=Vue.resolveComponent("el-button");return Vue.openBlock(),Vue.createElementBlock("div",F,[Vue.createVNode(E,null,{default:Vue.withCtx(()=>[Vue.createElementVNode("ul",z,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(a),(v,w)=>(Vue.openBlock(),Vue.createElementBlock("li",{key:w},[Vue.createVNode(x,{trigger:"contextmenu"},{dropdown:Vue.withCtx(()=>[Vue.createVNode(C,null,{default:Vue.withCtx(()=>[Vue.createVNode(m,{icon:"el-icon-plus"},{default:Vue.withCtx(()=>[A]),_:1}),Vue.createVNode(m,{icon:"el-icon-circle-plus"},{default:Vue.withCtx(()=>[L]),_:1}),Vue.createVNode(m,{icon:"el-icon-circle-plus-outline"},{default:Vue.withCtx(()=>[j]),_:1}),Vue.createVNode(m,{icon:"el-icon-check"},{default:Vue.withCtx(()=>[M]),_:1})]),_:1})]),default:Vue.withCtx(()=>[Vue.createVNode(g,{size:"medium",type:c(v.path)?"danger":"",effect:"dark",closable:"","disable-transitions":!1,onClose:me=>e(w),class:"tags-li"},{default:Vue.withCtx(()=>[Vue.createVNode(p,{to:v.path},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(v.title),1)]),_:2},1032,["to"])]),_:2},1032,["type","onClose"])]),_:2},1024)]))),128))])]),_:1}),Vue.createVNode(x,{onCommand:d,class:"flex items-center"},{dropdown:Vue.withCtx(()=>[Vue.createVNode(C,null,{default:Vue.withCtx(()=>[Vue.createVNode(m,{command:"other"},{default:Vue.withCtx(()=>[q]),_:1}),Vue.createVNode(m,{command:"all"},{default:Vue.withCtx(()=>[K]),_:1})]),_:1})]),default:Vue.withCtx(()=>[Vue.createVNode(b,{type:"primary",size:"mini"},{default:Vue.withCtx(()=>[P,O]),_:1})]),_:1})])}}});var G=f(U,[["__scopeId","data-v-412c4791"]]);const H={key:0,class:"title"},J=Vue.createTextVNode("\u9996\u9875"),Q={key:0},W=Vue.defineComponent({setup(r){const l=VueRouter.useRoute(),{state:u}=h(),s=Vue.ref([]);Vue.watch(l,c=>{const n=e=>{if(e.path==l.path)return e;if(e.children){const d=e.children.map(n).find(Boolean);return d?[e,d]:!1}else return!1};s.value=N(u.menu.menu).map(n).filter(Boolean).flattenDeep().value(),y.exports.isEmpty(s.value)&&s.value.push(c)},{immediate:!0});const o=Vue.computed(()=>u.user.browser),a=Vue.computed(()=>{const c=N.last(s.value);if(c)return c.meta.title});return(c,n)=>{const e=Vue.resolveComponent("el-breadcrumb-item"),d=Vue.resolveComponent("router-link"),_=Vue.resolveComponent("el-breadcrumb");return Vue.unref(o).isMini?(Vue.openBlock(),Vue.createElementBlock("p",H,Vue.toDisplayString(Vue.unref(a)),1)):(Vue.openBlock(),Vue.createBlock(_,{key:1,separator:"/"},{default:Vue.withCtx(()=>[Vue.createVNode(e,{to:{path:"/"}},{default:Vue.withCtx(()=>[J]),_:1}),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(s.value,(V,t)=>(Vue.openBlock(),Vue.createBlock(e,{key:t},{default:Vue.withCtx(()=>[V.type!=1?(Vue.openBlock(),Vue.createElementBlock("span",Q,Vue.toDisplayString(V.meta.title),1)):(Vue.openBlock(),Vue.createBlock(d,{key:1,style:{"font-weight":"500"},to:V.path},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(V.meta.title),1)]),_:2},1032,["to"]))]),_:2},1024))),128))]),_:1}))}}});var X=f(W,[["__scopeId","data-v-528aaf1a"]]);const k=r=>(Vue.pushScopeId("data-v-22b17912"),r=r(),Vue.popScopeId(),r),Y={class:"topbar"},Z=k(()=>Vue.createElementVNode("div",{class:"flex1"},null,-1)),ee={class:"topbar_user"},te={class:"el-dropdown-link"},oe={class:"name"},ue=k(()=>Vue.createElementVNode("img",{src:B,alt:""},null,-1)),ne=Vue.createTextVNode("\u9996\u9875"),le=Vue.createTextVNode("\u767B\u5F55/\u6CE8\u518C"),se=Vue.createTextVNode("\u9000\u51FA"),ae=Vue.defineComponent({setup(r){const{state:l,commit:u,dispatch:s}=h(),{collapse:o,info:a}=Vue.toRefs(l.user),c=VueRouter.useRouter();async function n(e){switch(e){case"home":window.location.href="http://food.f1dao.cn";break;case"sign":c.push("/sign");break;case"exit":await s("user/userLogout",l.user.token),c.push("/sign");break}}return(e,d)=>{const _=Vue.resolveComponent("el-avatar"),V=Vue.resolveComponent("el-dropdown-item"),t=Vue.resolveComponent("el-dropdown-menu"),i=Vue.resolveComponent("el-dropdown");return Vue.openBlock(),Vue.createElementBlock("div",Y,[Vue.createElementVNode("div",{class:"topbar_collapse",onClick:d[0]||(d[0]=p=>Vue.unref(u)("user/updCollapse",!Vue.unref(o)))},[Vue.createElementVNode("i",{class:Vue.normalizeClass([Vue.unref(o)?"el-icon-s-unfold":"el-icon-s-fold"])},null,2)]),Vue.createVNode(X),Z,Vue.createElementVNode("div",ee,[Vue.createVNode(i,{trigger:"click",onCommand:n},{dropdown:Vue.withCtx(()=>[Vue.createVNode(t,{slot:"dropdown",class:"popper-dropdown-menu-user"},{default:Vue.withCtx(()=>[Vue.createVNode(V,{command:"home"},{default:Vue.withCtx(()=>[ne]),_:1}),Vue.createVNode(V,{command:"sign"},{default:Vue.withCtx(()=>[le]),_:1}),Vue.createVNode(V,{command:"exit"},{default:Vue.withCtx(()=>[se]),_:1})]),_:1})]),default:Vue.withCtx(()=>[Vue.createElementVNode("span",te,[Vue.createElementVNode("span",oe,Vue.toDisplayString(Vue.unref(a).nickname||"\u672A\u767B\u5F55"),1),Vue.createVNode(_,{src:Vue.unref(l).user.info.headImg},{default:Vue.withCtx(()=>[ue]),_:1},8,["src"])])]),_:1})])])}}});var ce=f(ae,[["__scopeId","data-v-22b17912"]]);const re={class:"page-layout__left"},de={class:"page-layout__right"},Ve={class:"page-layout__topbar"},ie={class:"page-layout__process"},_e={class:"page-layout__container"},pe=Vue.defineComponent({setup(r){const{state:l,commit:u,getters:s}=h();VueRouter.useRoute();const o=Vue.computed(()=>s["user/collapse"]),a=Vue.ref("slide-fade");return(c,n)=>{const e=Vue.resolveComponent("router-view");return Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["page-layout",{collapse:Vue.unref(o)}])},[Vue.createElementVNode("div",{id:"overlay",class:"page-layout__mask",onClick:n[0]||(n[0]=d=>Vue.unref(u)("user/updCollapse",!0))}),Vue.createElementVNode("div",re,[Vue.createVNode(I)]),Vue.createElementVNode("div",de,[Vue.createElementVNode("div",Ve,[Vue.createVNode(ce)]),Vue.createElementVNode("div",ie,[Vue.createVNode(G)]),Vue.createElementVNode("div",_e,[Vue.createVNode(e,null,{default:Vue.withCtx(({Component:d})=>[Vue.createVNode(Vue.Transition,{name:a.value,mode:"out-in"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createBlock(Vue.KeepAlive,{max:"10"},[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(d)))],1024))]),_:2},1032,["name"])]),_:1})])])],2)}}});var xe=f(pe,[["__scopeId","data-v-2ad3764e"]]);export{xe as default};
