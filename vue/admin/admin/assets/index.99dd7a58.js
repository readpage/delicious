import{d as e,r as t,o as s,c as o,w as n,u as a,i as r,a as i,_ as c,b as d,e as u,f as m,s as l,N as p,g as h,D as _,h as g,j as f,k as v,l as E,m as L}from"./vendor.341633ee.js";var w=e({setup(e){const d=c;return(e,c)=>{const u=t("router-view");return s(),o(a(r),{locale:a(d)},{default:n((()=>[i(u)])),_:1},8,["locale"])}}}),x=e({setup:e=>(e,t)=>(s(),o("div",null,"icon-svg"))});x.__scopeId="data-v-47031ce2";const b={"./components/icon-svg/index.vue":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:x})};var I={install:e=>{Object.keys(b).forEach((t=>{const s=b[t].default;t.match("/([^/]+?)/index.vue"),e.component(RegExp.$1,s)}))}},y={install:e=>{e.use(d)}},k={install:e=>{e.use(y)}};let O;const P={},R=function(e,t){if(!t||0===t.length)return e();if(void 0===O){const e=document.createElement("link").relList;O=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`/${e}`)in P)return;P[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":O,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))},T=u({history:m(),routes:[]}),j=[{path:"/",name:"index",component:()=>R((()=>import("./index.39013ed4.js")),["assets/index.39013ed4.js","assets/index.cd9e7533.css","assets/vendor.341633ee.js"]),children:[{path:"/",name:"æ•°æ®ç»Ÿè®¡",component:()=>R((()=>import("./index.96ccce03.js")),["assets/index.96ccce03.js","assets/vendor.341633ee.js"]),meta:{title:"æ•°æ®ç»Ÿè®¡",icon:"el-icon-s-home"}}]},{path:"/sign",name:"sign",component:()=>R((()=>import("./index.6e2e19fc.js")),["assets/index.6e2e19fc.js","assets/index.205a954c.css","assets/vendor.341633ee.js"]),meta:{title:"ç™»å½•/æ³¨å†Œ"}},{path:"/500",name:"500",component:()=>R((()=>import("./500.5c582211.js")),["assets/500.5c582211.js","assets/ErrorPage.450f5b0a.js","assets/ErrorPage.f206c4db.css","assets/vendor.341633ee.js"]),meta:{title:"500"}},{path:"/:pathMatch(.*)*",name:"404",component:()=>R((()=>import("./404.11071cb9.js")),["assets/404.11071cb9.js","assets/ErrorPage.450f5b0a.js","assets/ErrorPage.f206c4db.css","assets/vendor.341633ee.js"]),meta:{title:"404"}}];function A(){const{clientHeight:e,clientWidth:t}=document.documentElement,s=navigator.userAgent.toLowerCase();let o=(s.match(/firefox|chrome|safari|opera/g)||"other")[0];(s.match(/msie|trident/g)||[])[0]&&(o="msie");let n="";n="ontouchstart"in window||-1!==s.indexOf("touch")||-1!==s.indexOf("mobile")?-1!==s.indexOf("ipad")?"pad":-1!==s.indexOf("mobile")?"mobile":-1!==s.indexOf("android")?"androidPad":"pc":"pc";let a="";switch(o){case"chrome":case"safari":case"mobile":a="webkit";break;case"msie":a="ms";break;case"firefox":a="Moz";break;case"opera":a="O";break;default:a="webkit"}const r=s.indexOf("android")>0?"android":navigator.platform.toLowerCase();let i="full";i=t<768?"xs":t<992?"sm":t<1200?"md":t<1920?"xl":"full";const c=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),d="pc"===n,u=!d;return{height:e,width:t,version:(s.match(/[\s\S]+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],type:o,plat:r,tag:n,prefix:a,isMobile:u,isIOS:c,isPC:d,isMini:"xs"===i||u,screen:i}}T.beforeEach((async(e,t,s)=>{l.get("token")||"/sign"==e.path||s("/sign");let o=document.getElementById("overlay");o&&document.body.clientWidth<768&&o.click(),s()})),T.afterEach((e=>{document.title=e.meta.title}));function D(){let e=document.getElementById("loading");e&&document.body.removeChild(e)}const V={updCollapse(e,t){e.collapse=t},setBrowser(e){e.browser=A()},showLoading(e){e.loading=!0,p.start()},hideLoading(e){e.loading=!1,p.done(),D()},elLoading(e){e.elLoading=h.service({text:"æ‹¼å‘½åŠ è½½ä¸­...",spinner:"el-icon-loading"})},closeElLoading(e){e.elLoading&&e.elLoading.close()},setUserInfo(e,t){e.info=t,l.set("userInfo",t)},remUser(e){e.info={},l.remove("userInfo")}},M=A(),S=_.create({baseURL:"/api"});let U=0;function C(e,t){return s=>{const o={};let n="";return t&&"get"!=t?(o.method=t,o.data=s):(s&&s.urlParam&&(n=s.urlParam,delete s.urlParam),o.method="get",o.params=s),S(e+n,o).then((e=>e.data))}}S.interceptors.request.use((e=>{0==U++&&"/user/selectIsUser"!=e.url&&oe.commit("user/showLoading");const t=l.get("token");return t&&(e.headers.Authorization=t.token_type+" "+t.access_token),e}),(e=>(g.error("æœåŠ¡å™¨å‡ºé—®é¢˜äº†!ðŸ˜°"),Promise.reject(e)))),S.interceptors.response.use((e=>{U--;const t=e.data;if(2==Math.trunc(t.code/100)){switch(t.code){case 201:case 205:break;case 202:return e;default:g.success(t.msg)}return U<=0&&oe.commit("user/hideLoading"),e}switch(t.code){case 504:case 508:return async function(e){const t=l.get("token").refresh_token;return l.remove("token"),await oe.dispatch("user/refreshToken",t),await S.request(e.config).then((e=>e))}(e);case 501:case 507:s=t.msg,f.confirm(s,"æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{oe.dispatch("user/userRemove"),T.push("/sign")})).catch((()=>{g.info("å·²å–æ¶ˆç™»å½•!")}));break;case 403:g.warning(t.msg);break;default:g.warning(t.msg)}throw oe.commit("user/closeElLoading"),oe.commit("user/hideLoading"),e;var s}),(e=>(oe.commit("user/closeElLoading"),oe.commit("user/hideLoading"),T.push("/500"),Promise.reject(e))));const B=C("/oauth/login","post"),$=C("/oauth/logout","delete"),F=C("/oauth/refresh","put"),q=C("/user/save","post"),z=C("/user/selectIsUser"),N=C("/user/page"),W=C("/user/info"),J=C("/role/page"),H=C("/role/list"),X=C("/menu/permMenu"),G=C("/menu/list"),K=C("/log-info/page"),Q={async appLoad({dispatch:e}){await oe.dispatch("menu/permMenu"),D()},refreshToken({commit:e,dispatch:t},s){const o=new FormData;return o.append("refreshToken",s),F(o).then((e=>(l.set("token",e.data),e.data)))},userInfo:({commit:e})=>W().then((t=>(e("setUserInfo",t.data),t))),async userLogout({dispatch:e}){const t=new FormData,s=l.get("token");return t.append("token",s.access_token),await $(t),e("userRemove")},userRemove({commit:e}){e("remUser"),l.remove("token"),oe.commit("menu/setMenu",[]),oe.commit("menu/setRoutes",[])}};const Y={setMenu(e,t){e.menu=t,l.set("menu",t)},setRoutes(e,t){!function(e){j.forEach((e=>{T.addRoute(e)}));const t={"../views/goods/index.vue":()=>R((()=>import("./index.1eb83d30.js")),["assets/index.1eb83d30.js","assets/vendor.341633ee.js"]),"../views/orders/index.vue":()=>R((()=>import("./index.b917aed3.js")),["assets/index.b917aed3.js","assets/vendor.341633ee.js"]),"../views/system/menu/index.vue":()=>R((()=>import("./index.ad52e0f9.js")),["assets/index.ad52e0f9.js","assets/index.ecef1483.css","assets/vendor.341633ee.js"]),"../views/system/role/index.vue":()=>R((()=>import("./index.23fa42d1.js")),["assets/index.23fa42d1.js","assets/index.fbd2b98f.css","assets/vendor.341633ee.js"]),"../views/system/user/index.vue":()=>R((()=>import("./index.a75c6ef1.js")),["assets/index.a75c6ef1.js","assets/index.5389f007.css","assets/Add.eb0e9716.js","assets/Form.vue_vue&type=script&setup=true&lang.6c3ed7fc.js","assets/vendor.341633ee.js","assets/Edit.12169796.js"]),"../views/system/monitor/log/index.vue":()=>R((()=>import("./index.6af42500.js")),["assets/index.6af42500.js","assets/index.aa728e7c.css","assets/vendor.341633ee.js"]),"../views/system/user/components/Add.vue":()=>R((()=>import("./Add.eb0e9716.js")),["assets/Add.eb0e9716.js","assets/Form.vue_vue&type=script&setup=true&lang.6c3ed7fc.js","assets/vendor.341633ee.js"]),"../views/system/user/components/Delete.vue":()=>R((()=>import("./Delete.b0b0e8f2.js")),["assets/Delete.b0b0e8f2.js","assets/vendor.341633ee.js"]),"../views/system/user/components/Edit.vue":()=>R((()=>import("./Edit.12169796.js")),["assets/Edit.12169796.js","assets/Form.vue_vue&type=script&setup=true&lang.6c3ed7fc.js","assets/vendor.341633ee.js"]),"../views/system/user/components/Form.vue":()=>R((()=>import("./Form.051b8a86.js")),["assets/Form.051b8a86.js","assets/Form.vue_vue&type=script&setup=true&lang.6c3ed7fc.js","assets/vendor.341633ee.js"])};e.forEach((e=>{e.component=t[`../views/${e.component}/index.vue`],T.addRoute("index",e)})),T.replace(T.currentRoute.value.fullPath)}(t),e.routes=t,l.set("routes",t)},setTagsItem(e,t){e.tagsList.push(t)},delTagsItem(e,t){e.tagsList.splice(t,1)},clearTags(e){e.tagsList.splice(0)},clearTagsOther(e,t){e.tagsList.splice(0),e.tagsList.push(t)}};function Z(e){let t=e.filter((e=>!e.parentId)),s=e.filter((e=>e.parentId)),o=(e,t)=>{e.forEach((e=>{t.forEach(((s,n)=>{if(s.parentId==e.id){let a=JSON.parse(JSON.stringify(t));a.splice(n,1),o([s],a),e.children?e.children.push(s):e.children=[s]}}))}))};return o(t,s),t}const ee={permMenu:({commit:e})=>X().then((async t=>{const s=t.data.map((e=>(e.meta={title:e.title,icon:e.icon},delete e.title,delete e.icon,e))),o=s.filter((e=>1==e.type));e("setRoutes",o);const n=Z(s.filter((e=>2!=e.type)));return e("setMenu",n),oe.dispatch("user/userInfo"),t}))};const te={user:{namespaced:!0,state:{browser:M,collapse:M.isMini,loading:!0,elLoading:void 0,info:l.get("userInfo")},getters:{browser:e=>e.browser,collapse:e=>e.collapse},actions:Q,mutations:V},menu:{namespaced:!0,state:{menu:l.get("menu")||[],routes:l.get("routes")||[],tagsList:[]},getters:{},actions:ee,mutations:Y}},se=Symbol(),oe=v({modules:te});function ne(){return E(se)}L(w).use(k).use(oe,se).use(T).use(I).mount("#app"),oe.dispatch("user/appLoad");export{B as A,z as a,q as b,G as c,J as d,H as e,N as f,K as g,Z as t,ne as u};
