import{c as e,u as a}from"./index.3c7941e5.js";import{d as l,C as t,f as o,r as n,o as i,c as d,a as r,L as s,E as u,u as p,F as c,G as f,p as g,e as b,y as m,M as _,N as h,t as v}from"./vendor.2e23e953.js";const w={page:e("/log-info/page"),clearAll:e("/log-info/clearAll","delete")},z=f();g("data-v-6347d3fc");const y=r("i",{class:"el-icon-view"},null,-1),x=r("span",{style:{"font-size":"12px"}},"详细",-1),C=s("关闭");b();var S=l({props:{data:{type:Object,default:{username:""}}},emits:["open"],setup(e,{emit:a}){const l=e,{data:f}=t(l),g=o(!1);function b(){a("open"),g.value=!0}return(e,a)=>{const l=n("el-button"),t=n("el-descriptions-item"),o=n("el-descriptions"),m=n("el-dialog");return i(),d(c,null,[r(l,{type:"text",onClick:b},{default:z((()=>[y,x])),_:1}),r(m,{title:"操作日志详细",modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value=e)},{footer:z((()=>[r(l,{size:"mini",onClick:a[1]||(a[1]=e=>g.value=!1)},{default:z((()=>[C])),_:1})])),default:z((()=>[r(o,{direction:"vertical",column:3,border:""},{default:z((()=>[r(t,{label:"操作人员"},{default:z((()=>[s(u(p(f).username),1)])),_:1}),r(t,{label:"请求方式"},{default:z((()=>[s(u(p(f).requestMethod),1)])),_:1}),r(t,{label:"请求地址"},{default:z((()=>[s(u(p(f).url),1)])),_:1}),r(t,{label:"请求地址"},{default:z((()=>[s(u(p(f).url),1)])),_:1}),r(t,{label:"浏览器"},{default:z((()=>[s(u(p(f).browser),1)])),_:1}),r(t,{label:"操作系统"},{default:z((()=>[s(u(p(f).os),1)])),_:1}),r(t,{label:"设备类型"},{default:z((()=>[s(u(p(f).deviceType),1)])),_:1}),r(t,{label:"IP地址"},{default:z((()=>[s(u(p(f).ipAddr),1)])),_:1}),r(t,{label:"地理位置"},{default:z((()=>[s(u(p(f).location),1)])),_:1}),r(t,{label:"操作信息"},{default:z((()=>[s(u(p(f).msg),1)])),_:1}),r(t,{label:"异常信息"},{default:z((()=>[s(u(p(f).error),1)])),_:1}),r(t,{label:"操作方法"},{default:z((()=>[s(u(p(f).method),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});S.__scopeId="data-v-6347d3fc";const k=f();g("data-v-cb866e4a");const I={class:"view"},j={class:"role"},A=s("刷新"),L=s("清空");b();var M=l({setup(e){const{state:l,commit:t}=a(),s=m({total:0,pageNum:1,pageSize:5,logInfo:[]}),u=o();function c(e){s.pageSize=e,g()}function f(e){s.pageNum=e,g()}function g(){t("user/showLoading"),w.page({urlParam:`/${s.pageNum}/${s.pageSize}`}).then((e=>{s.logInfo=e.data.list,s.total=e.data.total}))}function b(){v.confirm("确定清空?").then((()=>{t("user/btnLoading"),w.clearAll().then((e=>{g()}))}))}return g(),(e,a)=>{const t=n("el-button"),o=n("el-space"),m=n("el-table-column"),v=n("el-table"),w=n("el-pagination"),z=n("el-scrollbar"),y=_("loading");return i(),d("div",I,[r(z,null,{default:k((()=>[r("div",j,[r(o,{size:10},{default:k((()=>[r(t,{size:"mini",icon:"el-icon-refresh",onClick:g},{default:k((()=>[A])),_:1}),r(t,{size:"mini",type:"warning",icon:"el-icon-delete",loading:p(l).user.btnLoading,onClick:b},{default:k((()=>[L])),_:1},8,["loading"])])),_:1}),h(r(v,{data:p(s).logInfo,stripe:"","header-cell-style":{background:"#f5f7fa",color:"#606266"},"max-height":"500","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"},{default:k((()=>[r(m,{type:"selection",width:"50"}),r(m,{label:"操作人员",prop:"username","show-overflow-tooltip":"","min-width":"150"}),r(m,{label:"请求方式",prop:"requestMethod",width:"80"}),r(m,{label:"请求地址",prop:"url",width:"180"}),r(m,{label:"操作系统",prop:"os",width:"120"}),r(m,{label:"ip地址",prop:"ipAddr",width:"140"}),r(m,{label:"地理位置",prop:"location",width:"140"}),r(m,{label:"操作信息",prop:"msg",width:"120"}),r(m,{label:"创建时间",prop:"createTime",width:"180"}),r(m,{label:"操作",fixed:"right",width:"70"},{default:k((e=>[r(S,{data:u.value,onOpen:a=>{return l=e.row,void(u.value=l);var l}},null,8,["data","onOpen"])])),_:1})])),_:1},8,["data"]),[[y,p(l).user.loading]]),r(w,{layout:"total, sizes, pre, pager, next, jumper",small:"",total:p(s).total,"page-sizes":[5,10,20,40],"page-size":p(s).pageSize,background:"",onCurrentChange:f,onSizeChange:c},null,8,["total","page-size"])])])),_:1})])}}});M.__scopeId="data-v-cb866e4a";var N=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:M});export{N as _};
