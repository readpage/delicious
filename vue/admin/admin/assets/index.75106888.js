import{s as e,N as t,c as s,a as n,D as a,_ as o,b as r,d as i,u,e as d,r as c,o as l,f as p,w as m,g as f,i as h,h as g,j as _,K as v,k as b,l as y,m as x,n as L,p as k,q as w,v as E,t as I,x as O,y as S,z as T,F as A,A as j,B as P}from"./vendor.6bddc292.js";function R(){const{clientHeight:e,clientWidth:t}=document.documentElement,s=navigator.userAgent.toLowerCase();let n=(s.match(/firefox|chrome|safari|opera/g)||"other")[0];(s.match(/msie|trident/g)||[])[0]&&(n="msie");let a="";a="ontouchstart"in window||-1!==s.indexOf("touch")||-1!==s.indexOf("mobile")?-1!==s.indexOf("ipad")?"pad":-1!==s.indexOf("mobile")?"mobile":-1!==s.indexOf("android")?"androidPad":"pc":"pc";let o="";switch(n){case"chrome":case"safari":case"mobile":o="webkit";break;case"msie":o="ms";break;case"firefox":o="Moz";break;case"opera":o="O";break;default:o="webkit"}const r=s.indexOf("android")>0?"android":navigator.platform.toLowerCase();let i="full";i=t<768?"xs":t<992?"sm":t<1200?"md":t<1920?"xl":"full";const u=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),d="pc"===a,c=!d;return{height:e,width:t,version:(s.match(/[\s\S]+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],type:n,plat:r,tag:a,prefix:o,isMobile:c,isIOS:u,isPC:d,isMini:"xs"===i||c,screen:i}}function q(e){e=JSON.parse(JSON.stringify(e));const t=[],s={};return e.forEach((e=>s[e.id]=e)),e.forEach((e=>{const n=s[e.parentId];n?(n.children||(n.children=[])).push(e):t.push(e)})),t}const M={updCollapse(e,t){e.collapse=t},setBrowser(e){e.browser=R()},showLoading(e){e.loading=!0},btnLoading(e){e.btnLoading=!0},hideLoading(e){e.loading=!1,e.btnLoading=!1,t.done()},setUser(t,s){t.info=s,e.set("userInfo",s)},remUser(t){t.info={},e.remove("userInfo")},setToken(t,s){t.token=s,e.set("token",s)},remToken(t){t.token=null,e.remove("token")}},D=R();let V;const z={},U=function(e,t){if(!t||0===t.length)return e();if(void 0===V){const e=document.createElement("link").relList;V=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`/${e}`)in z)return;z[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":V,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))},B=[{path:"/",name:"index",component:()=>U((()=>import("./index.78d58c0e.js")),["assets/index.78d58c0e.js","assets/index.59dc0df3.css","assets/vendor.6bddc292.js"]),children:[{path:"/",name:"数据统计",component:()=>U((()=>import("./index.d4bddc07.js")),["assets/index.d4bddc07.js","assets/index.154910e9.css","assets/vendor.6bddc292.js"]),meta:{title:"数据统计",icon:"el-icon-s-home"}}]},{path:"/sign",name:"sign",component:()=>U((()=>import("./index.19705ea2.js")),["assets/index.19705ea2.js","assets/index.205a954c.css","assets/vendor.6bddc292.js"]),meta:{title:"登录/注册"}},{path:"/500",name:"500",component:()=>U((()=>import("./500.5d9912f5.js")),["assets/500.5d9912f5.js","assets/ErrorPage.30b65170.js","assets/ErrorPage.952bfca1.css","assets/vendor.6bddc292.js"]),meta:{title:"500"}},{path:"/:pathMatch(.*)*",name:"404",component:()=>U((()=>import("./404.10851a0f.js")),["assets/404.10851a0f.js","assets/ErrorPage.30b65170.js","assets/ErrorPage.952bfca1.css","assets/vendor.6bddc292.js"]),meta:{title:"404"}}],N=s({history:n(),routes:B});N.beforeEach(((t,s,n)=>{e.get("token")||"/sign"==t.path||n("/sign");let a=document.getElementById("overlay");a&&document.body.clientWidth<768&&a.click(),n()})),N.afterEach((e=>{document.title=e.meta.title}));const C=a.create({baseURL:"/api"});let F=0,$=[],W=!1;function J(e,t){return s=>{const n={};let a="";return s&&s.urlParam&&(a=s.urlParam,delete s.urlParam),t&&"get"!=t?(n.method=t,n.data=s):(n.method="get",n.params=s),C(e+a,n).then((e=>e.data))}}C.interceptors.request.use((e=>{0==F++&&t.start();const s=de.state.user.token;return s&&(e.headers.Authorization=s.token_type+" "+s.access_token),e}),(e=>(o.error("服务器出问题了!😰"),Promise.reject(e)))),C.interceptors.response.use((e=>{F--;const t=e.data;if(2==Math.trunc(t.code/100)){switch(t.code){case 201:case 205:break;case 202:return e;default:o.success(t.msg)}return F<=0&&de.commit("user/hideLoading"),e}switch(t.code){case 504:case 508:return function(e){const t=e.config;return W?new Promise((e=>{$.push((()=>{e(C(t))}))})):(W=!0,de.dispatch("user/refreshToken",de.state.user.token).then((e=>($.forEach((t=>t(e.data))),$=[],C(t)))).catch((e=>{de.commit("app/hideAppLoading")})).finally((()=>{W=!1})))}(e);case 507:s=t.msg,r.confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{de.dispatch("user/userRemove"),N.push("/sign")})).catch((()=>{o.info("已取消登录!")}));break;case 403:o.warning(t.msg);break;default:o.warning(t.msg)}throw de.commit("user/hideLoading"),e;var s}),(e=>(F--,de.commit("user/hideLoading"),de.commit("app/hideAppLoading"),N.push("/500"),Promise.reject(e))));const H={list:J("/menu/list"),permMenu:J("/menu/permMenu"),save:J("/menu/save","post"),update:J("/menu/update","put"),del:J("/menu/remove","delete")},K=J("/user/page"),X=J("/user/info"),G=J("/user/save","post"),Q=J("/user/update","put"),Y={page:K,info:X,add:G,isUser:J("/user/selectIsUser"),update:Q,del:J("/user/removeByIds","delete")},Z=J("/oauth/login","post"),ee=J("/oauth/logout","delete"),te=J("/oauth/refresh","put"),se=J("/user/save","post"),ne={recent:J("/statis/recent")},ae={refreshToken({commit:e,dispatch:t},s){const n=s.refresh_token,a=new FormData;return e("remToken"),a.append("refreshToken",n),te(a).then((t=>(e("setToken",t.data),t)))},userInfo:({commit:e})=>Y.info().then((t=>(e("setUser",t.data),t))),async userLogout({dispatch:e},t){const s=new FormData;return s.append("token",t.access_token),await ee(s),e("userRemove")},userRemove({commit:e}){e("remUser"),e("remToken"),de.commit("menu/setMenu",[]),de.commit("menu/setRoutes",[])}};const oe={setMenu(t,s){t.menu=s,e.set("menu",s)},setRoutes(t,s){!async function(e){B.forEach((e=>{N.addRoute(e)}));const t={"/src/views/foods/index.vue":()=>U((()=>import("./index.ee278b02.js").then((function(e){return e._}))),["assets/index.ee278b02.js","assets/index.458138dc.css","assets/vendor.6bddc292.js"]),"/src/views/orders/index.vue":()=>U((()=>import("./index.5c5ac67f.js").then((function(e){return e._}))),["assets/index.5c5ac67f.js","assets/vendor.6bddc292.js"]),"/src/views/system/menu/index.vue":()=>U((()=>import("./index.27b1c0a6.js")),["assets/index.27b1c0a6.js","assets/index.617d5206.css","assets/index.b1ccad6a.js","assets/vendor.6bddc292.js","assets/index.ee278b02.js","assets/index.458138dc.css","assets/index.5c5ac67f.js","assets/index.23da0b56.js","assets/index.a663cfe3.css","assets/index.19419489.js","assets/index.1fa1f077.css","assets/index.7238b0a4.js","assets/index.b8644a6e.css"]),"/src/views/system/role/index.vue":()=>U((()=>import("./index.23da0b56.js").then((function(e){return e._}))),["assets/index.23da0b56.js","assets/index.a663cfe3.css","assets/index.b1ccad6a.js","assets/vendor.6bddc292.js"]),"/src/views/system/user/index.vue":()=>U((()=>import("./index.19419489.js").then((function(e){return e._}))),["assets/index.19419489.js","assets/index.1fa1f077.css","assets/index.b1ccad6a.js","assets/vendor.6bddc292.js"]),"/src/views/system/monitor/log/index.vue":()=>U((()=>import("./index.7238b0a4.js").then((function(e){return e._}))),["assets/index.7238b0a4.js","assets/index.b8644a6e.css","assets/vendor.6bddc292.js"])};e.forEach((e=>{e.component=t[e.component],N.addRoute("index",e)}))}(s),t.routes=s,e.set("routes",s)},setTagsItem(e,t){e.tagsList.push(t)},delTagsItem(e,t){e.tagsList.splice(t,1)},clearTags(e){e.tagsList.splice(0)},clearTagsOther(e,t){e.tagsList.splice(0),e.tagsList.push(t)}},re={permMenu:({commit:e})=>H.permMenu().then((async t=>{const s=t.data.map((e=>(e.meta={title:e.title,icon:e.icon},e))),n=s.filter((e=>1==e.type));e("setRoutes",n),await N.replace(N.currentRoute.value.fullPath);const a=q(s.filter((e=>2!=e.type)));return e("setMenu",a),t}))};const ie={user:{namespaced:!0,state:{browser:D,collapse:D.isMini,loading:!1,btnLoading:!1,info:e.get("userInfo")||{},token:e.get("token")||null},getters:{browser:e=>e.browser,collapse:e=>e.collapse,token:e=>e.token},actions:ae,mutations:M},menu:{namespaced:!0,state:{menu:e.get("menu")||[],routes:e.get("routes")||[],tagsList:[]},getters:{},actions:re,mutations:oe},app:{namespaced:!0,state:{appLoading:!1},getters:{},actions:{async appLoad({dispatch:e,commit:t}){t("appLoading"),de.dispatch("user/userInfo"),await de.dispatch("menu/permMenu"),t("hideAppLoading")}},mutations:{appLoading(e){e.appLoading=!0},hideAppLoading(e){e.appLoading=!1}}}},ue=Symbol(),de=i({modules:ie});function ce(){return u(ue)}const le={key:0,id:"loading"};var pe=d({setup(e){const t=y,{state:s}=ce();return(e,n)=>{const a=c("v-lottie"),o=c("router-view");return l(),p(f(h),{locale:f(t)},{default:m((()=>[f(s).app.appLoading?(l(),p("div",le,[g(a,{src:"/static/lottie/food.json",width:"500px",height:"500px"})])):_("",!0),g(o,null,{default:m((({Component:e})=>[(l(),p(v,{max:"10"},[(l(),p(b(e)))],1024))])),_:1})])),_:1},8,["locale"])}}}),me=d({props:{option:{type:Object,required:!0},loading:{type:Boolean,required:!1,default:!1},height:{type:String,required:!1,default:"300px"}},setup(e){const t=e,s=x(),n=x();return L((()=>{let e=n.value;e&&(t.loading?e.showLoading():(e.setOption(t.option),e.hideLoading()))})),k((()=>{const e=w(s.value);n.value=e,window.addEventListener("resize",(()=>{e.resize()}))})),(t,n)=>(l(),p("div",{class:"v-chart",style:{height:e.height}},[g("div",{ref:s,style:{height:"100%"}},null,512)],4))}});me.__scopeId="data-v-129883f2";var fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:me}),he=d({props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3},separator:{type:String,required:!1,default:""},decimalSeparator:{type:String,required:!1,default:"."}},setup:e=>(t,s)=>(l(),p(f(E),{startAmount:e.start,endAmount:e.end,prefix:e.prefix,suffix:e.suffix,duration:e.duration,decimals:e.decimals,separator:e.separator,decimalSeparator:e.decimalSeparator},null,8,["startAmount","endAmount","prefix","suffix","duration","decimals","separator","decimalSeparator"]))});he.__scopeId="data-v-533aec67";var ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:he}),_e=d({setup:e=>(e,t)=>(l(),p("div",null,"icon-svg"))});_e.__scopeId="data-v-47031ce2";var ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_e});I("data-v-180b8ef8");const be={class:"v-lottie"};O();var ye=d({props:{src:{type:[String,Object],required:!0},speed:{type:Number,required:!1,default:2.2},background:{type:String,required:!1,default:"transparent"},width:{type:String,required:!1},height:{type:String,required:!1}},setup:e=>(t,s)=>{const n=c("lottie-player");return l(),p("div",be,[g(n,{class:"lottie-player",src:e.src,background:e.background,speed:e.speed,style:{width:e.width,height:e.height},loop:"",autoplay:""},null,8,["src","background","speed","style"])])}});ye.__scopeId="data-v-180b8ef8";var xe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ye});const Le=g("i",{class:"el-icon-picture"},null,-1);var ke=d({props:{action:{type:String,required:!0},fileList:{type:Array,required:!0}},emits:["success","updImg"],setup(e,{expose:t,emit:s}){const n=e,{getters:a}=ce(),r=S({dialogImg:"",visible:!1}),i=T((()=>n.fileList.length)),u=S({Authorization:""}),d=a["user/token"];d&&(u.Authorization=d.token_type+" "+d.access_token);const h=x();function _(e,t){e.size/1024/1024<50?s("updImg",t):(o.error("上传文件不能超过 50MB!"),t.splice(t.findIndex((t=>t.uid==e.uid))))}function v(){o.error("上传失败！")}function b(e,t,n){200==e.code?o.success(`${t.name}文件上传成功！`):o.error(e.msg),s("success",e)}function y(e,t){s("updImg",t),s("success","")}function L(e){r.visible=!0,r.dialogImg=e.url}return t({clearFiles:function(){s("updImg",[]),h.value.clearFiles()}}),(t,s)=>{const a=c("el-upload"),o=c("el-image"),d=c("el-dialog");return l(),p(A,null,[g(a,{ref:h,name:"file",action:n.action,headers:f(u),class:{disabled:f(i)},"list-type":"picture-card","on-error":v,"on-success":b,"on-change":_,"before-remove":y,"on-preview":L,"file-list":e.fileList},{default:m((()=>[Le])),_:1},8,["action","headers","class","file-list"]),g(d,{modelValue:f(r).visible,"onUpdate:modelValue":s[1]||(s[1]=e=>f(r).visible=e)},{default:m((()=>[g(o,{src:f(r).dialogImg,fit:"fill"},null,8,["src"])])),_:1},8,["modelValue"])],64)}}});const we={"./components/chart/index.vue":fe,"./components/count/index.vue":ge,"./components/icon-svg/index.vue":ve,"./components/lottie/index.vue":xe,"./components/upload/index.vue":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ke})};var Ee={install:e=>{Object.keys(we).forEach((t=>{const s=we[t].default;t.match("/([^/]+?)/index.vue"),e.component("v-"+RegExp.$1,s)}))}},Ie={install:e=>{e.use(j)}},Oe={install:e=>{e.use(Ie)}};P(pe).use(Oe).use(de,ue).use(N).use(Ee).mount("#app"),de.dispatch("app/appLoad");export{ne as A,Z as a,Y as b,se as c,J as d,q as e,H as f,ce as u};
