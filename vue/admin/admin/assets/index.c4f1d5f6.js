import{c as e,u as l}from"./index.bf837159.js";import{e as a,B as t,m as o,r as n,o as i,f as d,h as r,L as s,E as u,g as p,F as c,G as f,t as g,v as b,x as m,P as _,Q as h,b as v}from"./vendor.f7504fb0.js";const w={page:e("/log-info/page"),clearAll:e("/log-info/clearAll","delete")},z=f();g("data-v-6347d3fc");const x=r("i",{class:"el-icon-view"},null,-1),y=r("span",{style:{"font-size":"12px"}},"详细",-1),C=s("关闭");b();var S=a({props:{data:{type:Object,default:{username:""}}},emits:["open"],setup(e,{emit:l}){const a=e,{data:f}=t(a),g=o(!1);function b(){l("open"),g.value=!0}return(e,l)=>{const a=n("el-button"),t=n("el-descriptions-item"),o=n("el-descriptions"),m=n("el-dialog");return i(),d(c,null,[r(a,{type:"text",onClick:b},{default:z((()=>[x,y])),_:1}),r(m,{title:"操作日志详细",modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e)},{footer:z((()=>[r(a,{size:"mini",onClick:l[1]||(l[1]=e=>g.value=!1)},{default:z((()=>[C])),_:1})])),default:z((()=>[r(o,{direction:"vertical",column:3,border:""},{default:z((()=>[r(t,{label:"操作人员"},{default:z((()=>[s(u(p(f).username),1)])),_:1}),r(t,{label:"请求方式"},{default:z((()=>[s(u(p(f).requestMethod),1)])),_:1}),r(t,{label:"请求地址"},{default:z((()=>[s(u(p(f).url),1)])),_:1}),r(t,{label:"请求地址"},{default:z((()=>[s(u(p(f).url),1)])),_:1}),r(t,{label:"浏览器"},{default:z((()=>[s(u(p(f).browser),1)])),_:1}),r(t,{label:"操作系统"},{default:z((()=>[s(u(p(f).os),1)])),_:1}),r(t,{label:"设备类型"},{default:z((()=>[s(u(p(f).deviceType),1)])),_:1}),r(t,{label:"IP地址"},{default:z((()=>[s(u(p(f).ipAddr),1)])),_:1}),r(t,{label:"地理位置"},{default:z((()=>[s(u(p(f).location),1)])),_:1}),r(t,{label:"操作信息"},{default:z((()=>[s(u(p(f).msg),1)])),_:1}),r(t,{label:"异常信息"},{default:z((()=>[s(u(p(f).error),1)])),_:1}),r(t,{label:"操作方法"},{default:z((()=>[s(u(p(f).method),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});S.__scopeId="data-v-6347d3fc";const k=f();g("data-v-b3c8da16");const I={class:"view"},j={class:"role"},A=s("刷新"),L=s("清空");b();var O=a({setup(e){const{state:a,commit:t}=l(),s=m({total:0,pageNum:1,pageSize:10,logInfo:[]}),u=o();function c(e){s.pageSize=e,g()}function f(e){s.pageNum=e,g()}function g(){t("user/showLoading"),w.page({urlParam:`/${s.pageNum}/${s.pageSize}`}).then((e=>{s.logInfo=e.data.list,s.total=e.data.total}))}function b(){v.confirm("确定清空?").then((()=>{t("user/btnLoading"),w.clearAll().then((e=>{g()}))}))}return g(),(e,l)=>{const t=n("el-button"),o=n("el-space"),m=n("el-table-column"),v=n("el-table"),w=n("el-pagination"),z=n("el-scrollbar"),x=_("loading");return i(),d("div",I,[r(z,null,{default:k((()=>[r("div",j,[r(o,{size:10},{default:k((()=>[r(t,{size:"mini",icon:"el-icon-refresh",onClick:g},{default:k((()=>[A])),_:1}),r(t,{size:"mini",type:"warning",icon:"el-icon-delete",loading:p(a).user.btnLoading,onClick:b},{default:k((()=>[L])),_:1},8,["loading"])])),_:1}),h(r(v,{data:p(s).logInfo,stripe:"","header-cell-style":{background:"#f5f7fa",color:"#606266"},"max-height":"500","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"},{default:k((()=>[r(m,{type:"selection",width:"50"}),r(m,{label:"操作人员",prop:"username","show-overflow-tooltip":"","min-width":"150"}),r(m,{label:"请求方式",prop:"requestMethod",width:"80"}),r(m,{label:"请求地址",prop:"url",width:"180"}),r(m,{label:"操作系统",prop:"os",width:"120"}),r(m,{label:"ip地址",prop:"ipAddr",width:"140"}),r(m,{label:"地理位置",prop:"location",width:"140"}),r(m,{label:"操作信息",prop:"msg",width:"120"}),r(m,{label:"创建时间",prop:"createTime",width:"180"}),r(m,{label:"操作",fixed:"right",width:"70"},{default:k((e=>[r(S,{data:u.value,onOpen:l=>{return a=e.row,void(u.value=a);var a}},null,8,["data","onOpen"])])),_:1})])),_:1},8,["data"]),[[x,p(a).user.loading]]),r(w,{layout:"total, sizes, pre, pager, next, jumper",small:"",total:p(s).total,"page-sizes":[5,10,20,40],"page-size":p(s).pageSize,background:"",onCurrentChange:f,onSizeChange:c},null,8,["total","page-size"])])])),_:1})])}}});O.__scopeId="data-v-b3c8da16";var M=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:O});export{M as _};
