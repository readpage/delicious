import{_ as V}from"./load.937dc889.js";import{_ as p,u as m,A as v}from"./index.0962dd28.js";import{_ as h}from"./FoodCard2.93d1501d.js";import"./vendor.1caa6517.js";import"./day.5f57db8d.js";const g={class:"search"},k={class:"flex justify-center"},x={key:0,src:V,style:{height:"45px"},alt:""},B={key:1},E=Vue.defineComponent({setup(y){Vue.useCssVars(r=>({"3c006232":Vue.unref(i)}));const{state:d}=m(),e=Vue.reactive({count:10,total:20,foods:[],loading:!1}),t=Vue.ref(),a=Vue.ref(),i=Vue.computed(()=>d.user.browser.innerHeight);Vue.onMounted(()=>{t.value.wrap.addEventListener("scroll",f)});function f(){t.value.wrap.scrollTop+t.value.wrap.offsetHeight>=a.value.offsetHeight&&!e.loading&&_(),console.log(t.value.wrap.scrollTop+t.value.wrap.offsetHeight,a.value.offsetHeight)}function s(){return e.count>=e.total}function _(){s()||(e.loading=!0,setTimeout(()=>{e.count+=10,u().then(r=>{e.loading=!1})},500))}function u(){return v.order({urlParam:`/1/${e.count}`}).then(r=>{r.data.list.forEach((c,n)=>{c.order=n+1}),e.foods=r.data.list,e.total=r.data.total})}return u(),(r,c)=>{const n=Vue.resolveComponent("el-scrollbar");return Vue.openBlock(),Vue.createElementBlock("div",g,[Vue.createVNode(n,{ref:(o,l)=>{l.scrollbar=o,t.value=o}},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",{ref:(o,l)=>{l.scroll=o,a.value=o}},[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(e).foods,o=>(Vue.openBlock(),Vue.createBlock(h,{class:"my-2.5",data:o},null,8,["data"]))),256))],512),Vue.createElementVNode("div",k,[Vue.unref(e).loading?(Vue.openBlock(),Vue.createElementBlock("img",x)):Vue.createCommentVNode("",!0),s()?(Vue.openBlock(),Vue.createElementBlock("span",B,"\u6CA1\u6709\u66F4\u591A\u4E86")):Vue.createCommentVNode("",!0)])]),_:1},512)])}}});var N=p(E,[["__scopeId","data-v-7ed1cf46"]]);export{N as default};
