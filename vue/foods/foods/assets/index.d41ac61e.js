import{_ as m}from"./load.937dc889.js";import{_,A as h}from"./index.0962dd28.js";import{_ as v}from"./FoodCard2.93d1501d.js";import"./vendor.1caa6517.js";import"./day.5f57db8d.js";const x={class:"search"},g={class:"flex h-10 items-center"},k=Vue.createTextVNode("\u53D6\u6D88"),C={class:"flex justify-center items-center",style:{height:"45px"}},y={key:0,src:m,style:{height:"45px"},alt:""},B={key:1},b=Vue.defineComponent({setup(E){const e=Vue.reactive({search:"",foods:[],count:10,total:20,loading:!1}),u=Vue.ref();Vue.nextTick(()=>{u.value.focus()});const l=Vue.ref(),a=Vue.ref();Vue.onMounted(()=>{l.value.wrap.addEventListener("scroll",d)});function d(){l.value.wrap.scrollTop+l.value.wrap.offsetHeight>=a.value.offsetHeight&&!e.loading&&i()}function s(){return e.count>=e.total}function i(){s()||(e.loading=!0,setTimeout(()=>{e.count+=10,c().then(o=>{e.loading=!1})},500))}function c(){return h.page({urlParam:`/1/${e.count}`,name:e.search}).then(o=>{e.total=o.data.total,e.foods=o.data.list})}return Vue.watch(()=>e.search,o=>{c()}),(o,r)=>{const V=Vue.resolveComponent("el-input"),p=Vue.resolveComponent("el-button"),f=Vue.resolveComponent("el-scrollbar");return Vue.openBlock(),Vue.createElementBlock("div",x,[Vue.createVNode(f,{ref:(t,n)=>{n.scrollbar=t,l.value=t}},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",{ref:(t,n)=>{n.scroll=t,a.value=t},class:"p-2.5"},[Vue.createElementVNode("div",g,[Vue.createVNode(V,{modelValue:Vue.unref(e).search,"onUpdate:modelValue":r[0]||(r[0]=t=>Vue.unref(e).search=t),size:"small",ref:(t,n)=>{n.inputRef=t,u.value=t},"prefix-icon":"el-icon-search",clearable:"",placeholder:"\u641C\u7D22"},null,8,["modelValue"]),Vue.createVNode(p,{class:"ml-2.5",type:"text",onClick:r[1]||(r[1]=t=>o.$router.push("/"))},{default:Vue.withCtx(()=>[k]),_:1})]),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(e).foods,t=>(Vue.openBlock(),Vue.createBlock(v,{class:"my-2.5",data:t,height:"210px"},null,8,["data"]))),256))],512),Vue.createElementVNode("div",C,[Vue.unref(e).loading?(Vue.openBlock(),Vue.createElementBlock("img",y)):Vue.createCommentVNode("",!0),s()?(Vue.openBlock(),Vue.createElementBlock("span",B,"\u6CA1\u6709\u66F4\u591A\u4E86")):Vue.createCommentVNode("",!0)])]),_:1},512)])}}});var $=_(b,[["__scopeId","data-v-025f400c"]]);export{$ as default};
